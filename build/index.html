<html>

<head>
    <title>Stream of Pretentiousness</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta property="og:title" content="Stream of Pretentiousness" />
    <meta property="og:description" content="An open-source interactive nonfiction game written in SpaceFractive." />
    <meta name="twitter:card" content="summary" />

    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet"></link>
    <link href="assets/default-style.css" rel="stylesheet"></link>
    <script type="text/javascript" src="phaser.js"></script>
    <script>
        var exports = {};
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        var Core;
        (function(Core) {
            var EGotoSectionReason;
            (function(EGotoSectionReason) {
                EGotoSectionReason[EGotoSectionReason["Goto"] = 0] = "Goto";
                EGotoSectionReason[EGotoSectionReason["Back"] = 1] = "Back";
                EGotoSectionReason[EGotoSectionReason["Refresh"] = 2] = "Refresh";
            })(EGotoSectionReason = Core.EGotoSectionReason || (Core.EGotoSectionReason = {}));
            var OnBeginStory = [];
            var OnGotoSection = [];
            var currentSectionObserver = new MutationObserver(OnCurrentSectionModified);
            var currentSectionObserverConfig = {
                childList: true,
                attributes: true,
                characterData: true,
                subtree: true
            };

            function ActivateElement(element) {
                if (element.tagName && element.tagName.toLowerCase() == "a") {
                    var _loop_1 = function(i) {
                        switch (element.attributes[i].name) {
                            case "data-goto-section":
                                {
                                    element.addEventListener("click", function() {
                                        Core.GotoSection(element.attributes[i].value);
                                    });
                                    break;
                                }
                            case "data-goto-relative-section":
                                {
                                    switch (element.attributes[i].value) {
                                        case 'up':
                                            element.addEventListener("click", function() {
                                                Core.GotoRelativeSection(-1);
                                            });
                                            break;
                                        case 'down':
                                            element.addEventListener("click", function() {
                                                Core.GotoRelativeSection(1);
                                            });
                                            break;
                                    }
                                    break;
                                }
                            case "data-call-function":
                                {
                                    element.addEventListener("click", RetrieveFromWindow(element.attributes[i].value, 'function'));
                                    break;
                                }
                            case "data-replace-with":
                                {
                                    element.addEventListener("click", function() {
                                        Core.ReplaceActiveElement(element.id, ExpandMacro(element.attributes[i].value));
                                    });
                                    break;
                                }
                        }
                    };
                    for (var i = 0; i < element.attributes.length; i++) {
                        _loop_1(i);
                    }
                }
                if (element.id && element.id !== "__currentSection") {
                    if (element.id[0] !== '!') {
                        element.id = "!" + element.id;
                    }
                }
                if (element.children) {
                    for (var i = 0; i < element.children.length; i++) {
                        ActivateElement(element.children[i]);
                    }
                }
            }
            Core.ActivateElement = ActivateElement;

            function AddEventListener(eventName, handler) {
                switch (eventName) {
                    case "OnBeginStory":
                        {
                            OnBeginStory = OnBeginStory.concat(handler);
                            break;
                        }
                    case "OnGotoSection":
                    case "OnGoToSection":
                        {
                            OnGotoSection = OnGotoSection.concat(handler);
                            break;
                        }
                    default:
                        {
                            console.error("Core.AddEventListener: \"" + eventName + "\" is not a valid event");
                            break;
                        }
                }
            }
            Core.AddEventListener = AddEventListener;

            function BeginStory() {
                for (var i = 0; i < OnBeginStory.length; i++) {
                    OnBeginStory[i]();
                }
                var startSections = GetSectionsWithTag("Start");
                if (startSections.length == 0) {
                    console.error("BeginStory(): no section is defined with the Start tag.");
                } else if (startSections.length > 1) {
                    console.error("BeginStory(): multiple sections defined with the Start tag.");
                } else {
                    GotoSection(startSections[0]);
                }
            }
            Core.BeginStory = BeginStory;

            function CanBeInline(html, context) {
                var root = document.createElement("span");
                if (context) {
                    context.appendChild(root);
                } else {
                    document.appendChild(root);
                }
                root.innerHTML = html;
                var scan = function(e) {
                    if (getComputedStyle(e, "").display === "block") {
                        return false;
                    }
                    for (var i = 0; i < e.children.length; i++) {
                        if (scan(e.children[i]) === false) {
                            return false;
                        }
                    }
                    return true;
                };
                var result = scan(root);
                if (context) {
                    context.removeChild(root);
                } else {
                    document.removeChild(root);
                }
                return result;
            }

            function DisableLinks(section) {
                var links = section.getElementsByTagName("a");
                for (var i = 0; i < links.length; i++) {
                    var linkTag = links[i].outerHTML.substring(0, links[i].outerHTML.indexOf(">") + 1);
                    var contents = links[i].outerHTML.substring(links[i].outerHTML.indexOf(">") + 1, links[i].outerHTML.indexOf("</a>"));
                    links[i].outerHTML = "<span class=\"__disabledLink\" data-link-tag='" + linkTag + "'>" + contents + "</span>";
                }
            }

            function EnableLinks(section) {
                var links = section.getElementsByClassName("__disabledLink");
                for (var i = 0; i < links.length;) {
                    var linkTag = links[i].getAttribute('data-link-tag');
                    var contents = links[i].innerHTML;
                    links[i].outerHTML = linkTag + contents + '</a>';
                }
            }

            function ExpandMacro(macro) {
                switch (macro[0]) {
                    case '@':
                        {
                            if (macro[1] === '^')
                                return macro;
                            var sectionName = macro.substring(1);
                            if (document.getElementById(sectionName) === null) {
                                return "{section \"" + sectionName + "\" is not declared}";
                            } else {
                                return ExpandSection(macro.substring(1)).innerHTML;
                            }
                        }
                    case '#':
                        {
                            var functionName = macro.substring(1);
                            var targetFunction = RetrieveFromWindow(functionName, 'function');
                            if (targetFunction !== null && targetFunction !== undefined) {
                                var result = targetFunction();
                                return (result ? result.toString() : "");
                            } else {
                                return "{function \"" + functionName + "\" is not defined}";
                            }
                        }
                    case '$':
                        {
                            var variableName = macro.substring(1);
                            var targetVariable = RetrieveFromWindow(variableName, 'variable');
                            if (targetVariable !== null && targetVariable !== undefined) {
                                return targetVariable.toString();
                            } else {
                                return "{variable \"" + variableName + "\" is not defined}";
                            }
                        }
                    default:
                        {
                            return "{unknown metacharacter in macro \"" + macro + "\"";
                        }
                }
            }
            Core.ExpandMacro = ExpandMacro;

            function ExpandSection(id) {
                var source = document.getElementById(id);
                if (source === null) {
                    console.log("Section " + id + " doesn't exist");
                    return null;
                }
                var sectionInstance = source.cloneNode(true);
                sectionInstance.removeAttribute("hidden");
                var scan = function(element) {
                    for (var i = 0; i < element.attributes.length; i++) {
                        var expanded = false;
                        switch (element.attributes[i].name) {
                            case "data-expand-macro":
                                {
                                    if (element.parentElement) {
                                        var newElement = document.createElement("span");
                                        newElement.innerHTML = ExpandMacro(element.attributes[i].value);
                                        element.parentElement.replaceChild(newElement, element);
                                        expanded = true;
                                    }
                                    break;
                                }
                            case "data-image-source-macro":
                                {
                                    element.setAttribute("src", ExpandMacro(element.attributes[i].value));
                                    expanded = true;
                                }
                        }
                        if (expanded) {
                            break;
                        }
                    }
                    if (element.hasChildNodes) {
                        for (var i = 0; i < element.children.length; i++) {
                            scan(element.children[i]);
                        }
                    }
                };
                scan(sectionInstance);
                return sectionInstance;
            }

            function GetCurrentSectionTags() {
                return GetSectionTags("__currentSection");
            }
            Core.GetCurrentSectionTags = GetCurrentSectionTags;

            function GetSection(id) {
                var clone = ExpandSection(id);
                clone.setAttribute('data-id', id);
                return clone;
            }
            Core.GetSection = GetSection;

            function GetSectionsWithTag(tag) {
                var matchingSections = [];
                var sections = document.getElementsByClassName("section");
                for (var i = 0; i < sections.length; ++i) {
                    var sectionId = sections[i].getAttribute('id');
                    var sectionTags = GetSectionTags(sectionId);
                    if (sectionTags.indexOf(tag) !== -1) {
                        matchingSections.push(sectionId);
                    }
                }
                return matchingSections;
            }
            Core.GetSectionsWithTag = GetSectionsWithTag;

            function GetSectionTags(id) {
                var sectionDiv = document.getElementById(id);
                var tagDeclarations = sectionDiv.getAttribute("data-tags");
                return tagDeclarations.split(',');
            }
            Core.GetSectionTags = GetSectionTags;

            function GotoPreviousSection() {
                currentSectionObserver.disconnect();
                var history = document.getElementById("__history");
                if (history === null) {
                    console.error("History is not supported in this template (the __history element is missing)");
                    return;
                }
                var previousSections = history.getElementsByClassName('__previousSection');
                var previousSection = previousSections[previousSections.length - 1];
                if (!previousSection) {
                    return;
                }
                var id = previousSection.getAttribute('data-id');
                var clone = previousSection.cloneNode(true);
                EnableLinks(clone);
                SetElementAsCurrentSection(clone);
                for (var i = 0; i < OnGotoSection.length; i++) {
                    OnGotoSection[i](id, clone, GetSectionTags(id), EGotoSectionReason.Back);
                }
                history.removeChild(previousSection);
            }
            Core.GotoPreviousSection = GotoPreviousSection;

            function GoToPreviousSection() {
                GotoPreviousSection();
            }
            Core.GoToPreviousSection = GoToPreviousSection;

            function GotoSection(id) {
                currentSectionObserver.disconnect();
                var currentSection = document.getElementById("__currentSection");
                DisableLinks(currentSection);
                var history = document.getElementById("__history");
                var previousSectionId = currentSection.getAttribute('data-id');
                if (previousSectionId !== null && history !== null) {
                    history.innerHTML += "<div class=\"__previousSection\" data-id=\"" + previousSectionId + "\">" + currentSection.innerHTML + "</div>";
                    history.scrollTop = history.scrollHeight;
                }
                var clone = GetSection(id);
                SetElementAsCurrentSection(clone);
                for (var i = 0; i < OnGotoSection.length; i++) {
                    OnGotoSection[i](id, clone, GetSectionTags(id), EGotoSectionReason.Goto);
                }
            }
            Core.GotoSection = GotoSection;

            function GoToSection(id) {
                GotoSection(id);
            }
            Core.GoToSection = GoToSection;

            function GotoRelativeSection(offset) {
                var currentSection = document.getElementById("__currentSection");
                var currentSectionId = currentSection.getAttribute('data-id');
                var sections = document.getElementsByClassName("section");
                var i = 0;
                for (; i < sections.length; ++i) {
                    if (sections[i].getAttribute('id') === currentSectionId)
                        break;
                }
                if (i + offset >= sections.length || i + offset < 0) {
                    console.log("Tried to go to relative section out of bounds.");
                    return;
                }
                var nextSectionId = sections[i + offset].getAttribute('id');
                GotoSection(nextSectionId);
            }
            Core.GotoRelativeSection = GotoRelativeSection;

            function GoToRelativeSection(offset) {
                GotoRelativeSection(offset);
            }
            Core.GoToRelativeSection = GoToRelativeSection;

            function OnCurrentSectionModified(mutations) {
                for (var i = 0; i < mutations.length; i++) {
                    for (var j = 0; j < mutations[i].addedNodes.length; j++) {
                        var e = mutations[i].addedNodes[j];
                        ActivateElement(e);
                    }
                }
            }

            function RefreshCurrentSection() {
                currentSectionObserver.disconnect();
                var currentSection = document.getElementById("__currentSection");
                var id = currentSection.getAttribute("data-id");
                var clone = GetSection(id);
                SetElementAsCurrentSection(clone);
                for (var i = 0; i < OnGotoSection.length; i++) {
                    OnGotoSection[i](id, clone, GetSectionTags(id), EGotoSectionReason.Refresh);
                }
            }
            Core.RefreshCurrentSection = RefreshCurrentSection;

            function RetrieveFromWindow(name, type) {
                var targetObject = null;
                var tokens = name.split('.');
                for (var i = 0; i < tokens.length; i++) {
                    if (i === 0) {
                        targetObject = window[tokens[0]];
                    } else {
                        targetObject = targetObject[tokens[i]];
                    }
                }
                if (targetObject === undefined) {
                    return "{" + type + " \"" + name + "\" is not declared}";
                }
                return targetObject;
            }

            function ReplaceActiveElement(id, html) {
                var element = document.getElementById(id[0] === '!' ? id : "!" + id);
                if (!element) {
                    return;
                }
                var replacement = document.createElement(CanBeInline(html, element.parentElement) ? "span" : "div");
                replacement.className = "__inlineMacro";
                replacement.innerHTML = html;
                ActivateElement(replacement);
                element.parentNode.replaceChild(replacement, element);
            }
            Core.ReplaceActiveElement = ReplaceActiveElement;

            function SetElementAsCurrentSection(e) {
                var currentSection = document.getElementById("__currentSection");
                e.scrollTop = 0;
                e.id = "__currentSection";
                ActivateElement(e);
                currentSection.parentElement.replaceChild(e, currentSection);
                currentSectionObserver.observe(e, currentSectionObserverConfig);
            }
        })(Core = exports.Core || (exports.Core = {}));
        //# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ29yZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy9Db3JlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBc0JBLElBQWlCLElBQUksQ0E0bEJwQjtBQTVsQkQsV0FBaUIsSUFBSTtJQUVwQixJQUFZLGtCQUtYO0lBTEQsV0FBWSxrQkFBa0I7UUFFN0IsMkRBQUksQ0FBQTtRQUNKLDJEQUFJLENBQUE7UUFDSixpRUFBTyxDQUFBO0lBQ1IsQ0FBQyxFQUxXLGtCQUFrQixHQUFsQix1QkFBa0IsS0FBbEIsdUJBQWtCLFFBSzdCO0lBS0QsSUFBSSxZQUFZLEdBQXVCLEVBQUUsQ0FBQztJQVMxQyxJQUFJLGFBQWEsR0FBbUcsRUFBRSxDQUFDO0lBSXZILElBQUksc0JBQXNCLEdBQXNCLElBQUksZ0JBQWdCLENBQUMsd0JBQXdCLENBQUMsQ0FBQztJQUMvRixJQUFJLDRCQUE0QixHQUFHO1FBQ2xDLFNBQVMsRUFBRSxJQUFJO1FBQ2YsVUFBVSxFQUFFLElBQUk7UUFDaEIsYUFBYSxFQUFFLElBQUk7UUFDbkIsT0FBTyxFQUFFLElBQUk7S0FDYixDQUFBO0lBT0QseUJBQWdDLE9BQWlCO1FBR2hELEVBQUUsQ0FBQSxDQUFDLE9BQU8sQ0FBQyxPQUFPLElBQUksT0FBTyxDQUFDLE9BQU8sQ0FBQyxXQUFXLEVBQUUsSUFBSSxHQUFHLENBQUMsQ0FDM0QsQ0FBQztvQ0FDUSxDQUFDO2dCQUVSLE1BQU0sQ0FBQSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQ2xDLENBQUM7b0JBQ0EsS0FBSyxtQkFBbUI7d0JBQ3hCLENBQUM7NEJBQ0EsT0FBTyxDQUFDLGdCQUFnQixDQUFDLE9BQU8sRUFBRTtnQ0FDakMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDOzRCQUMvQyxDQUFDLENBQUMsQ0FBQzs0QkFDSCxLQUFLLENB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 source/day01.js
        function Day1Preload() {
            phaser.load.image('bunk', 'assets/bunk.jpg');
            phaser.load.image('no-fap-nat', 'assets/no-fap-nat.png');
            phaser.load.image('no-fap', 'assets/no-fap.png');
            phaser.load.image('what-to-do', 'assets/what-to-do.png');
            phaser.load.image('what-i-did', 'assets/what-i-did.png');
        }

        function Day1ShowJoke() {
            document.getElementById("__currentSection").innerHTML += "<p>" + Core.GetSection("Day1-Joke").innerHTML + "</p>";
        }

        // source/day02.js
        function Day2Preload() {
            phaser.load.image('shower', 'assets/shower.png');
        }

        Core.AddEventListener("OnGotoSection", function(sectionId, element, tags, reason) {
            if (sectionId === "5/23/18" && reason == EGotoSectionReason.Back) {
                day2LightsOut();
            } else if (tags.indexOf("Dark") != -1) {
                day2LightsOut();
            } else {
                day2LightsOn();
            }

        });

        function day2just() {
            document.getElementById("__currentSection").innerHTML += Core.GetSection("Day2-1").innerHTML;

            return "isn't <i>just</i>";
        }

        // TODO this could be a part of Fractive Core
        function changeCSS(cssFile) {

            var oldlink = document.getElementsByTagName("link").item(1);

            var newlink = document.createElement("link");
            newlink.setAttribute("rel", "stylesheet");
            newlink.setAttribute("type", "text/css");
            newlink.setAttribute("href", cssFile);

            document.getElementsByTagName("head").item(0).replaceChild(newlink, oldlink);
        }

        function day2LightsOut() {
            changeCSS("assets/dark-style.css");
        }

        function day2LightsOn() {
            changeCSS("assets/default-style.css");
        }

        // source/day03.js
        function Day3Preload() {
            phaser.load.image('gay-jesus', 'assets/gay-jesus.jpg');
            phaser.load.image('gay-street', 'assets/gay-street.jpg');
            phaser.load.image('christmas', 'assets/christmas.png');
        }

        function Day3Animation() {
            var animationTime = 4000;
            var style = {
                font: "24px Arial",
                fill: "#ffffff",
                align: "left"
            };
            var thingsHeSaid = [
                "I've been reading the bible more lately",
                "It's really helped me understand who I am",
                "I recommend you read it",
                "",
                "I mean I'm not gonna say \"I hate you\" or anything",
                "I just don't think you should be doing that stuff",
                "I'm sick of people assuming I'm gay",
                "",
                "I used to act on my gay feelings",
                "God loves me, he's just not happy when I'm not doing his will",
                "When I was younger I cross-dressed",
                "I have a friend named Erik who wants to go by Samantha",
                "I still love him but it's wrong to try to be a woman",
                "",
                "I'm turning 22 and I've never kissed anyone",
                "Can you help me meet girls?",
            ];
            words = phaser.add.group();

            var startingY = 830;
            var delay = 0;

            for (var i = 0; i < thingsHeSaid.length; ++i) {
                var text = phaser.add.text(30, startingY, thingsHeSaid[i], style);
                phaser.add.tween(text).to({
                    y: -50
                }, animationTime, Phaser.Easing.Linear.None, true, delay, 0, false);

                delay += animationTime / 3;
            }

            setTimeout(Day3RevealNextLink, delay + animationTime);
        }

        function Day3RevealNextLink() {
            day2LightsOn();
            words.destroy();
            document.getElementById("__currentSection").innerHTML += Core.GetSection("Day3NextToReveal").innerHTML;
        }

        // source/day04.js
        function Day4Preload() {
            phaser.load.audio('dooropen', 'assets/day4/dooropen.wav');
            phaser.load.audio('faintmusic', 'assets/day4/faintmusic.wav');
            phaser.load.audio('monologue', 'assets/day4/monologue.wav');
            phaser.load.audio('music1', 'assets/day4/music1.wav');
            phaser.load.audio('music2', 'assets/day4/music2.wav');
            phaser.load.audio('soundsgood', 'assets/day4/soundsgood.wav');

            phaser.load.image('cards', 'assets/day4/cards.jpg');
            phaser.load.image('goodhand', 'assets/day4/goodhand.jpg');
            phaser.load.image('roof', 'assets/day4/roof.jpg');
            phaser.load.image('gay-jesus', 'assets/gay-jesus.jpg');
        }

        function Day4Reveal1() {
            document.getElementById("__currentSection").innerHTML += Core.GetSection("Day4MinPt1").innerHTML;
        }

        function Day4Reveal2() {
            document.getElementById("__currentSection").innerHTML += Core.GetSection("Day4MinPt2").innerHTML;
            return "check my mailbox (nothing)";
        }

        function Day4FaintMusic() {
            phaser.sound.play('faintmusic');
        }

        function Day4Music1() {
            phaser.sound.play('music1');
        }

        function Day4OpenDoor() {
            phaser.sound.play('dooropen');
            phaser.sound.play('music2');
        }

        function Day4SoundsGood() {
            phaser.sound.play('soundsgood')
        }

        function Day4PlayMonologue() {
            phaser.sound.play('monologue');
        }

        // source/script.js
        // Your Javascript goes here

        // Load assets every story needs
        function __preload() {
            phaser.load.image('cover', 'assets/itch-cover.jpeg');
        }

        // New section event: if a section has the Sprite tag, add the sprite to the
        // window whose key matches the tag following Sprite
        Core.AddEventListener('OnGotoSection', function(id, element, tags, reason) {
            if (window['sprite'] != null) {
                window['sprite'].destroy();
            }

            var index = tags.indexOf('Sprite');
            var spriteKey = 'cover';
            if (index != -1) {
                spriteKey = tags[index + 1];
            }

            if (spriteKey !== "none") {
                window['sprite'] = phaser.add.sprite(0, 0, spriteKey);

                index = tags.indexOf('Scale');
                var scale = 1;
                if (index != -1) {
                    var scale = parseFloat(tags[index + 1]);

                    window['sprite'].scale.setTo(scale, scale);
                }
            }
        });

        function Season2Links() {
            // Generate HTML links to each section 
            // TODO this could be a lot nicer if Core provided link generator functions
            var list = "";
            var episodes = Core.GetSectionsWithTag("S2");

            for (var i = 0; i < episodes.length; i++) {
                var episode = episodes[i];

                // Each episode link needs to call the preload function for its episode
                var preloadFunction = 'Day' + (i + 1) + 'Preload';
                var onloadFunction = 'function() { Core.GoToSection(\'' + episode + '\'); }';

                var onclick = preloadFunction + '();';
                onclick += 'phaser.load.onLoadComplete.add(' + onloadFunction + ');';
                onclick += 'phaser.load.start();';
                list += '<p><a href="javascript:' + onclick + '">' + episode + '</a></p>';
            }

            return list;
        }
    </script>
    <script>
        function __Restart() {
            location.reload();
        }
        Core.AddEventListener("OnGotoSection", function(id, element, tags, reason) {
            // Scroll to top of new content
            var contentDiv = document.getElementById("__content");
            if (contentDiv) {
                contentDiv.scrollTop = 0;
            }
        });
    </script>
</head>

<body>
    <div id="__content">
        <!-- source/day01.md -->
        <div id="5/22/18" data-tags="S2" class="section" hidden="true">
            <p>I’m back in New York City! This is the place where I first decided to start making Stream of Pretentiousness. Let me set the tone of the game by telling you an <a title="" href="javascript:;" data-goto-section="Day1-Anecdote">anecdote</a>                about moving here.</p>
        </div>
        <div id="Day1-Anecdote" data-tags="Sprite,bunk,Scale,0.3" class="section" hidden="true">
            <p>I’m only here for the next 3 months, and on a tight budget. I live in a shared bedroom with a total of 6 beds. I’m top bunk on the left, and I don’t get much <a title="" href="javascript:;" data-goto-section="Day1-AloneTime">privacy</a>.</p>
        </div>
        <div id="Day1-AloneTime" data-tags="Sprite,no-fap-nat" class="section" hidden="true">
            <p>Luckily I have an important group chat where I can <a title="" href="javascript:;" data-goto-section="Day1-Talk">talk about</a> what happens to my bodily functions without privacy.</p>
        </div>
        <div id="Day1-Talk" data-tags="Sprite,no-fap" class="section" hidden="true">
            <p>Things were starting to get <a title="" href="javascript:;" data-goto-section="Day1-WhatToDo">out of hand</a>. I sat down to write code on my first day at <a title="" target="_blank" href="http://recurse.com">The Recurse Center&nbsp;<i class="fa fa-external-link" aria-hidden="true"></i></a>                and <a title="" href="javascript:;" data-call-function="Day1ShowJoke">all I could type was “sex,”</a> forcing me to switch tracks and just learn Rust instead.</p>
        </div>
        <div id="Day1-WhatToDo" data-tags="Sprite,what-to-do" class="section" hidden="true">
            <p>There’s no such thing as a stupid question, so I usually tend to <a title="" href="javascript:;" data-goto-section="Day1-WhatIDid">just ask</a>.</p>
        </div>
        <div id="Day1-WhatIDid" data-tags="Sprite,what-i-did" class="section" hidden="true">
            <p>I took that shower. My mind’s been a lot clearer.</p>
        </div>
        <div id="Day1-Joke" data-tags="" class="section" hidden="true">
            <p>That was a joke. This isn’t <em>strictly</em> interactive <em>non</em>-fiction.</p>
        </div>
        <!-- source/day02.md -->
        <div id="5/23/18" data-tags="S2" class="section" hidden="true">
            <p>My showers have been really nice lately and it <a title="" href="javascript:;" data-replace-with="#day2just" id="inline-0">isn’t</a> because of what we talked about last time.</p>
        </div>
        <div id="Day2-1" data-tags="" class="section" hidden="true">
            <p><span data-expand-macro="#day2LightsOut"></span></p>
            <p>Well it is because of that. But it’s also because <a title="" href="javascript:;" data-goto-section="Day2-2">the lights are out.</a></p>
        </div>
        <div id="Day2-2" data-tags="Dark,Sprite,shower" class="section" hidden="true">
            <p>I turn on my phone’s flashlight and then everything’s bathed in this ghostly glow.</p>
            <p>That’s how it looks in my head. I make this game on a tight schedule <a title="" href="javascript:;" data-goto-section="Day2-3">okay?</a></p>
        </div>
        <div id="Day2-3" data-tags="Dark,Sprite,none" class="section" hidden="true">
            <p>Anyway, partway through it, the flashlight turns off and then I can’t see anything. It’s like <a title="" href="javascript:;" data-goto-section="Day2-4">floating</a> in the hot water rain.</p>
        </div>
        <div id="Day2-4" data-tags="Dark,Sprite,none" class="section" hidden="true">
            <p>The first time I did it, I couldn’t find my soap in the dark and I’m pretty sure I used someone else’s. I smelled like peppermint <a title="" href="javascript:;" data-goto-section="Day2-5">after.</a></p>
        </div>
        <div id="Day2-5" data-tags="Dark,Sprite,shower" class="section" hidden="true">
            <p>Then I turn the flashlight on again and I can see the mist from the shower, just floating in the dark like I do.</p>
            <p>I only wish the lights worked when I go to pee…</p>
            <p><a title="" href="javascript:;" data-goto-section="Menu">See you tomorrow.</a></p>
        </div>
        <!-- source/day03.md -->
        <div id="5/24/18" data-tags="S2" class="section" hidden="true">
            <p>Homesickness is a vulnerable state. Sometimes vulnerability is the best opportunity to grow, but not when you share it in all the <a title="" href="javascript:;" data-goto-section="Day3-1">wrong places.</a></p>
        </div>
        <div id="Day3-1" data-tags="Sprite,gay-jesus,Scale,0.5" class="section" hidden="true">
            <p>One of my new roommates is Christian and I <em>really</em> <a title="" href="javascript:;" data-goto-section="Day3-2">didn’t see it coming.</a></p>
        </div>
        <div id="Day3-2" data-tags="Sprite,gay-street,Scale,0.25" class="section" hidden="true">
            <p>I guess I assume most people of color are even better Woke Atheists™ than I am, especially outside of Utah. And everyone else in the house is queer. And there’s a poster on the wall that says Gay Street.</p>
            <p>So I thought I could <a title="" href="javascript:;" data-goto-section="Day3-3">be myself.</a></p>
        </div>
        <div id="Day3-3" data-tags="Sprite,christmas,Scale,0.3" class="section" hidden="true">
            <p>And I knew that was a mistake right after I showed him my Christmas party photos.</p>
            <p><a title="" href="javascript:;" data-goto-section="Day3-4">The things he said…</a></p>
        </div>
        <div id="Day3-4" data-tags="Sprite,none,Dark" class="section" hidden="true">
            <p><span data-expand-macro="#Day3Animation"></span></p>
        </div>
        <div id="Day3NextToReveal" data-tags="" class="section" hidden="true">
            <p>I suddenly felt very unsafe.</p>
            <p>I didn’t say what I wanted to.</p>
            <p><a title="" href="javascript:;" data-goto-section="Menu">I just went to bed.</a></p>
        </div>
        <!-- source/day04.md -->
        <div id="5/25/18 (First episode with audio!)" data-tags="S2,Dark,Sprite,none" class="section" hidden="true">
            <p>Fuck, these streets are <a title="" href="javascript:;" data-goto-section="Day4-2">so lonely.</a></p>
        </div>
        <div id="Day4-2" data-tags="Dark,Sprite,cards,Scale,0.1" class="section" hidden="true">
            <p>Getting off the subway I saw a deck of cards someone had <a title="" href="javascript:;" data-goto-section="Day4-3">ripped to shreds</a> and scattered everywhere.</p>
        </div>
        <div id="Day4-3" data-tags="Dark,Sprite,goodhand,Scale,0.1" class="section" hidden="true">
            <p>And I realized I’ve been dealt a really good hand with this summer in New York, but that’s what sucks:</p>
            <p>No amount of loneliness would make it a good decision to shred the deck and go back to the certainty of <a title="" href="javascript:;" data-goto-section="Day4-4">home.</a></p>
        </div>
        <div id="Day4-4" data-tags="Dark,Sprite,none" class="section" hidden="true">
            <p>Home here isn’t really a home yet. I’m out of place in this neighborhood. My earbuds broke today so I can’t retreat into my music.</p>
            <p>At least I’m here now, I can <a title="" href="javascript:;" data-call-function="Day4Reveal1">open the front door</a></p>
        </div>
        <div id="Day4MinPt1" data-tags="" class="section" hidden="true">
            <p><a title="" href="javascript:;" data-call-function="Day4Reveal2">check my mailbox</a></p>
        </div>
        <div id="Day4MinPt2" data-tags="" class="section" hidden="true">
            <p><a title="" href="javascript:;" data-goto-section="Day4-5">climb the stairs</a></p>
        </div>
        <div id="Day4-5" data-tags="Dark,Sprite,none" class="section" hidden="true">
            <p><span data-expand-macro="#Day4FaintMusic"></span></p>
            <p>…and hear a song I’ve never heard before.</p>
            <p><a title="" href="javascript:;" data-goto-section="Day4-6">Who’s playing that?</a></p>
        </div>
        <div id="Day4-6" data-tags="Dark,Sprite,none" class="section" hidden="true">
            <p><span data-expand-macro="#Day4Music1"></span></p>
            <p>It’s from inside my apartment.</p>
            <p><a title="" href="javascript:;" data-goto-section="Day4-7">Go in.</a></p>
        </div>
        <div id="Day4-7" data-tags="Dark,Sprite,gay-jesus,Scale,0.5" class="section" hidden="true">
            <p><span data-expand-macro="#Day4OpenDoor"></span></p>
            <p>Oh my God, it’s him!</p>
            <p>What do I <a title="" href="javascript:;" data-goto-section="Day4-8">say?</a></p>
        </div>
        <div id="Day4-8" data-tags="Dark,Sprite,gay-jesus,Scale,0.5" class="section" hidden="true">
            <p><span data-expand-macro="#Day4SoundsGood"></span></p>
            <p>I could have said “That sound was the most beautiful thing I heard today.”</p>
            <p>I could have said “Fuck you.”</p>
            <p>I could have <a title="" href="javascript:;" data-goto-section="Day4-9">said…</a></p>
        </div>
        <div id="Day4-9" data-tags="Dark,Sprite,roof,Scale,0.1" class="section" hidden="true">
            <p><span data-expand-macro="#Day4PlayMonologue"></span><br/>…what I said to myself when I went to the roof and went over that moment in my head.</p>
            <p>But it’s not my job to say all that to a stranger.</p>
        </div>
        <!-- source/menu.md -->
        <div id="Menu" data-tags="Start" class="section" hidden="true">
            <h2><em>Welcome to the</em></h2>
            <h2>Stream of Pretentiousness</h2>
            <p>You’re playing an irreverent interactive nonfiction game written and programmed by Nat Quayle Nelson. New episodes are released daily!</p>
            <h4>Content warning: Queer stuff, sex stuff, offensive language. General oversharing.</h4>
            <h3><a title="" href="javascript:;" data-replace-with="@Season2" id="inline-1">Season Two: NYC, 2018</a></h3>
            <h3><a title="" href="javascript:;" data-replace-with="@Season1" id="inline-2">Season One: SLC, 2017</a></h3>
        </div>
        <div id="Season1" data-tags="" class="section" hidden="true">
            <p>Season 1 was made in Twine. Lots of people get stuck playing it because they don’t see the back button. It might be hard to see, but it’s there on the left. Trust me.</p>
            <p><a href="assets/season1/twine.html">Play season 1.</a></p>
        </div>
        <div id="Season2" data-tags="" class="section" hidden="true">
            <h3>Season 2: NYC, 2018</h3>
            <p><span data-expand-macro="#Season2Links"></span></p>
        </div>

        <div id="__phaser"></div>
        <div id="__currentSection">
            <noscript>
					<h1>Oh no!</h1>
					<p>Fractive requires Javascript to run, but Javascript is currently disabled.</p>
					<p>Please check your browser and plugin settings. You may need to enable Javascript in your browser and/or whitelist this URL in your script blocker if you're using one.</p>
				</noscript>
        </div>
    </div>
    <div id="__historyContainer" hidden>
        <div id="__history"></div>
    </div>
    <div id="__controls">
        <p class="controls-left">
            <a href="javascript:Core.GotoPreviousSection();">Back</a>
        </p>
        <p class="controls-right">
            <a href="#" onclick="__Restart()">Restart</a>
        </p>
    </div>
</body>

</html>
<script type="text/javascript">
    window.onload = function() {
        var args = {
            "width": 800,
            "height": 800,
            "transparent": true,
            "antialias": true
        }; // This code is injected into a Fractive story's output HTML file as the first
        // sequence of JavaScript that will be executed.
        // args.width, .height, .transparent, and .antialias will be set before
        // this code is invoked.

        // Helper creates a function that wraps another function in a null-check
        var undefinedFunctions = [];

        function checkAndCall(functionName) {
            return function() {
                if (window[functionName] !== undefined) {
                    window[functionName]();
                } else if (undefinedFunctions.indexOf(functionName) == -1) {
                    console.log("Function " + functionName + " is not defined. Skipping it.");
                    undefinedFunctions.push(functionName);
                }
            };
        }

        // Create a Phaser game object.
        phaser = new Phaser.Game(args.width, args.height, Phaser.AUTO, '__phaser', {
            preload: checkAndCall('__preload'),
            create: function() {
                checkAndCall('__create')();
                // Start the story after the Phaser game is fully prepared
                Core.BeginStory();
            },
            update: checkAndCall('__update'),
            render: checkAndCall('__render')
        }, args.transparent, args.antialias);
    };
</script>