<html>

<head>
    <title>Stream of Pretentiousness</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta property="og:title" content="Stream of Pretentiousness" />
    <meta property="og:description" content="An open-source interactive nonfiction game written in SpaceFractive." />
    <meta name="twitter:card" content="summary" />

    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet"></link>
    <link href="assets/default-style.css" rel="stylesheet"></link>
    <script type="text/javascript" src="phaser.js"></script>
    <script>
        var exports = {};
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        var Core;
        (function(Core) {
            var EGotoSectionReason;
            (function(EGotoSectionReason) {
                EGotoSectionReason[EGotoSectionReason["Goto"] = 0] = "Goto";
                EGotoSectionReason[EGotoSectionReason["Back"] = 1] = "Back";
                EGotoSectionReason[EGotoSectionReason["Refresh"] = 2] = "Refresh";
            })(EGotoSectionReason = Core.EGotoSectionReason || (Core.EGotoSectionReason = {}));
            var OnBeginStory = [];
            var OnGotoSection = [];
            var currentSectionObserver = new MutationObserver(OnCurrentSectionModified);
            var currentSectionObserverConfig = {
                childList: true,
                attributes: true,
                characterData: true,
                subtree: true
            };

            function ActivateElement(element) {
                if (element.tagName && element.tagName.toLowerCase() == "a") {
                    var _loop_1 = function(i) {
                        switch (element.attributes[i].name) {
                            case "data-goto-section":
                                {
                                    element.addEventListener("click", function() {
                                        Core.GotoSection(element.attributes[i].value);
                                    });
                                    break;
                                }
                            case "data-goto-relative-section":
                                {
                                    switch (element.attributes[i].value) {
                                        case 'up':
                                            element.addEventListener("click", function() {
                                                Core.GotoRelativeSection(-1);
                                            });
                                            break;
                                        case 'down':
                                            element.addEventListener("click", function() {
                                                Core.GotoRelativeSection(1);
                                            });
                                            break;
                                    }
                                    break;
                                }
                            case "data-call-function":
                                {
                                    element.addEventListener("click", RetrieveFromWindow(element.attributes[i].value, 'function'));
                                    break;
                                }
                            case "data-replace-with":
                                {
                                    element.addEventListener("click", function() {
                                        Core.ReplaceActiveElement(element.id, ExpandMacro(element.attributes[i].value));
                                    });
                                    break;
                                }
                        }
                    };
                    for (var i = 0; i < element.attributes.length; i++) {
                        _loop_1(i);
                    }
                }
                if (element.id && element.id !== "__currentSection") {
                    if (element.id[0] !== '!') {
                        element.id = "!" + element.id;
                    }
                }
                if (element.children) {
                    for (var i = 0; i < element.children.length; i++) {
                        ActivateElement(element.children[i]);
                    }
                }
            }
            Core.ActivateElement = ActivateElement;

            function AddEventListener(eventName, handler) {
                switch (eventName) {
                    case "OnBeginStory":
                        {
                            OnBeginStory = OnBeginStory.concat(handler);
                            break;
                        }
                    case "OnGotoSection":
                    case "OnGoToSection":
                        {
                            OnGotoSection = OnGotoSection.concat(handler);
                            break;
                        }
                    default:
                        {
                            console.error("Core.AddEventListener: \"" + eventName + "\" is not a valid event");
                            break;
                        }
                }
            }
            Core.AddEventListener = AddEventListener;

            function CallSectionEventHandlers(id, clone, reason) {
                for (var i = 0; i < OnGotoSection.length; i++) {
                    var result = OnGotoSection[i](id, clone, GetSectionTags(id), reason);
                    if (result) {
                        break;
                    }
                }
            }

            function BeginStory() {
                for (var i = 0; i < OnBeginStory.length; i++) {
                    OnBeginStory[i]();
                }
                var startSections = GetSectionsWithTag("Start");
                if (startSections.length == 0) {
                    console.error("BeginStory(): no section is defined with the Start tag.");
                } else if (startSections.length > 1) {
                    console.error("BeginStory(): multiple sections defined with the Start tag.");
                } else {
                    GotoSection(startSections[0]);
                }
            }
            Core.BeginStory = BeginStory;

            function CanBeInline(html, context) {
                var root = document.createElement("span");
                if (context) {
                    context.appendChild(root);
                } else {
                    document.appendChild(root);
                }
                root.innerHTML = html;
                var scan = function(e) {
                    if (getComputedStyle(e, "").display === "block") {
                        return false;
                    }
                    for (var i = 0; i < e.children.length; i++) {
                        if (scan(e.children[i]) === false) {
                            return false;
                        }
                    }
                    return true;
                };
                var result = scan(root);
                if (context) {
                    context.removeChild(root);
                } else {
                    document.removeChild(root);
                }
                return result;
            }

            function DisableLinks(section) {
                var links = section.getElementsByTagName("a");
                for (var i = 0; i < links.length; i++) {
                    var linkTag = links[i].outerHTML.substring(0, links[i].outerHTML.indexOf(">") + 1);
                    var contents = links[i].outerHTML.substring(links[i].outerHTML.indexOf(">") + 1, links[i].outerHTML.indexOf("</a>"));
                    links[i].outerHTML = "<span class=\"__disabledLink\" data-link-tag='" + linkTag + "'>" + contents + "</span>";
                }
            }

            function EnableLinks(section) {
                var links = section.getElementsByClassName("__disabledLink");
                for (var i = 0; i < links.length;) {
                    var linkTag = links[i].getAttribute('data-link-tag');
                    var contents = links[i].innerHTML;
                    links[i].outerHTML = linkTag + contents + '</a>';
                }
            }

            function ExpandMacro(macro) {
                switch (macro[0]) {
                    case '@':
                        {
                            if (macro[1] === '^')
                                return macro;
                            var sectionName = macro.substring(1);
                            if (document.getElementById(sectionName) === null) {
                                return "{section \"" + sectionName + "\" is not declared}";
                            } else {
                                return ExpandSection(macro.substring(1)).innerHTML;
                            }
                        }
                    case '#':
                        {
                            var functionName = macro.substring(1);
                            var targetFunction = RetrieveFromWindow(functionName, 'function');
                            if (targetFunction !== null && targetFunction !== undefined) {
                                var result = targetFunction();
                                return (result ? result.toString() : "");
                            } else {
                                return "{function \"" + functionName + "\" is not defined}";
                            }
                        }
                    case '$':
                        {
                            var variableName = macro.substring(1);
                            var targetVariable = RetrieveFromWindow(variableName, 'variable');
                            if (targetVariable !== null && targetVariable !== undefined) {
                                return targetVariable.toString();
                            } else {
                                return "{variable \"" + variableName + "\" is not defined}";
                            }
                        }
                    default:
                        {
                            return "{unknown metacharacter in macro \"" + macro + "\"";
                        }
                }
            }
            Core.ExpandMacro = ExpandMacro;

            function ExpandSection(id) {
                var source = document.getElementById(id);
                if (source === null) {
                    console.log("Section " + id + " doesn't exist");
                    return null;
                }
                var sectionInstance = source.cloneNode(true);
                sectionInstance.removeAttribute("hidden");
                var scan = function(element) {
                    for (var i = 0; i < element.attributes.length; i++) {
                        var expanded = false;
                        switch (element.attributes[i].name) {
                            case "data-expand-macro":
                                {
                                    if (element.parentElement) {
                                        var newElement = document.createElement("span");
                                        newElement.innerHTML = ExpandMacro(element.attributes[i].value);
                                        element.parentElement.replaceChild(newElement, element);
                                        expanded = true;
                                    }
                                    break;
                                }
                            case "data-image-source-macro":
                                {
                                    element.setAttribute("src", ExpandMacro(element.attributes[i].value));
                                    expanded = true;
                                }
                        }
                        if (expanded) {
                            break;
                        }
                    }
                    if (element.hasChildNodes) {
                        for (var i = 0; i < element.children.length; i++) {
                            scan(element.children[i]);
                        }
                    }
                };
                scan(sectionInstance);
                return sectionInstance;
            }

            function GetCurrentSectionTags() {
                return GetSectionTags("__currentSection");
            }
            Core.GetCurrentSectionTags = GetCurrentSectionTags;

            function GetSection(id) {
                var clone = ExpandSection(id);
                clone.setAttribute('data-id', id);
                return clone;
            }
            Core.GetSection = GetSection;

            function GetSectionsWithTag(tag) {
                var matchingSections = [];
                var sections = document.getElementsByClassName("section");
                for (var i = 0; i < sections.length; ++i) {
                    var sectionId = sections[i].getAttribute('id');
                    var sectionTags = GetSectionTags(sectionId);
                    if (sectionTags.indexOf(tag) !== -1) {
                        matchingSections.push(sectionId);
                    }
                }
                return matchingSections;
            }
            Core.GetSectionsWithTag = GetSectionsWithTag;

            function GetSectionTags(id) {
                var sectionDiv = document.getElementById(id);
                var tagDeclarations = sectionDiv.getAttribute("data-tags");
                return tagDeclarations.split(',');
            }
            Core.GetSectionTags = GetSectionTags;

            function GotoPreviousSection() {
                currentSectionObserver.disconnect();
                var history = document.getElementById("__history");
                if (history === null) {
                    console.error("History is not supported in this template (the __history element is missing)");
                    return;
                }
                var previousSections = history.getElementsByClassName('__previousSection');
                var previousSection = previousSections[previousSections.length - 1];
                if (!previousSection) {
                    return;
                }
                var id = previousSection.getAttribute('data-id');
                var clone = previousSection.cloneNode(true);
                EnableLinks(clone);
                SetElementAsCurrentSection(clone);
                CallSectionEventHandlers(id, clone, Core.EGotoSectionReason.Back);
                history.removeChild(previousSection);
            }
            Core.GotoPreviousSection = GotoPreviousSection;

            function GoToPreviousSection() {
                GotoPreviousSection();
            }
            Core.GoToPreviousSection = GoToPreviousSection;

            function GotoSection(id) {
                currentSectionObserver.disconnect();
                var currentSection = document.getElementById("__currentSection");
                DisableLinks(currentSection);
                var history = document.getElementById("__history");
                var previousSectionId = currentSection.getAttribute('data-id');
                if (previousSectionId !== null && history !== null) {
                    history.innerHTML += "<div class=\"__previousSection\" data-id=\"" + previousSectionId + "\">" + currentSection.innerHTML + "</div>";
                    history.scrollTop = history.scrollHeight;
                }
                var clone = GetSection(id);
                SetElementAsCurrentSection(clone);
                CallSectionEventHandlers(id, clone, Core.EGotoSectionReason.Goto);
            }
            Core.GotoSection = GotoSection;

            function GoToSection(id) {
                GotoSection(id);
            }
            Core.GoToSection = GoToSection;

            function GotoRelativeSection(offset) {
                var currentSection = document.getElementById("__currentSection");
                var currentSectionId = currentSection.getAttribute('data-id');
                var sections = document.getElementsByClassName("section");
                var i = 0;
                for (; i < sections.length; ++i) {
                    if (sections[i].getAttribute('id') === currentSectionId)
                        break;
                }
                if (i + offset >= sections.length || i + offset < 0) {
                    console.log("Tried to go to relative section out of bounds.");
                    return;
                }
                var nextSectionId = sections[i + offset].getAttribute('id');
                GotoSection(nextSectionId);
            }
            Core.GotoRelativeSection = GotoRelativeSection;

            function GoToRelativeSection(offset) {
                GotoRelativeSection(offset);
            }
            Core.GoToRelativeSection = GoToRelativeSection;

            function OnCurrentSectionModified(mutations) {
                for (var i = 0; i < mutations.length; i++) {
                    for (var j = 0; j < mutations[i].addedNodes.length; j++) {
                        var e = mutations[i].addedNodes[j];
                        ActivateElement(e);
                    }
                }
            }

            function RefreshCurrentSection() {
                currentSectionObserver.disconnect();
                var currentSection = document.getElementById("__currentSection");
                var id = currentSection.getAttribute("data-id");
                var clone = GetSection(id);
                SetElementAsCurrentSection(clone);
                CallSectionEventHandlers(id, clone, Core.EGotoSectionReason.Refresh);
            }
            Core.RefreshCurrentSection = RefreshCurrentSection;

            function RetrieveFromWindow(name, type) {
                var targetObject = null;
                var tokens = name.split('.');
                for (var i = 0; i < tokens.length; i++) {
                    if (i === 0) {
                        targetObject = window[tokens[0]];
                    } else {
                        targetObject = targetObject[tokens[i]];
                    }
                }
                if (targetObject === undefined) {
                    return "{" + type + " \"" + name + "\" is not declared}";
                }
                return targetObject;
            }

            function ReplaceActiveElement(id, html) {
                var element = document.getElementById(id[0] === '!' ? id : "!" + id);
                if (!element) {
                    return;
                }
                var replacement = document.createElement(CanBeInline(html, element.parentElement) ? "span" : "div");
                replacement.className = "__inlineMacro";
                replacement.innerHTML = html;
                ActivateElement(replacement);
                element.parentNode.replaceChild(replacement, element);
            }
            Core.ReplaceActiveElement = ReplaceActiveElement;

            function SetElementAsCurrentSection(e) {
                var currentSection = document.getElementById("__currentSection");
                e.scrollTop = 0;
                e.id = "__currentSection";
                ActivateElement(e);
                currentSection.parentElement.replaceChild(e, currentSection);
                currentSectionObserver.observe(e, currentSectionObserverConfig);
            }
        })(Core = exports.Core || (exports.Core = {}));
        //# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ29yZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy9Db3JlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBc0JBLElBQWlCLElBQUksQ0F5bUJwQjtBQXptQkQsV0FBaUIsSUFBSTtJQUVwQixJQUFZLGtCQUtYO0lBTEQsV0FBWSxrQkFBa0I7UUFFN0IsMkRBQUksQ0FBQTtRQUNKLDJEQUFJLENBQUE7UUFDSixpRUFBTyxDQUFBO0lBQ1IsQ0FBQyxFQUxXLGtCQUFrQixHQUFsQix1QkFBa0IsS0FBbEIsdUJBQWtCLFFBSzdCO0lBS0QsSUFBSSxZQUFZLEdBQXVCLEVBQUUsQ0FBQztJQVMxQyxJQUFJLGFBQWEsR0FBbUcsRUFBRSxDQUFDO0lBSXZILElBQUksc0JBQXNCLEdBQXNCLElBQUksZ0JBQWdCLENBQUMsd0JBQXdCLENBQUMsQ0FBQztJQUMvRixJQUFJLDRCQUE0QixHQUFHO1FBQ2xDLFNBQVMsRUFBRSxJQUFJO1FBQ2YsVUFBVSxFQUFFLElBQUk7UUFDaEIsYUFBYSxFQUFFLElBQUk7UUFDbkIsT0FBTyxFQUFFLElBQUk7S0FDYixDQUFBO0lBT0QseUJBQWdDLE9BQWlCO1FBR2hELEVBQUUsQ0FBQSxDQUFDLE9BQU8sQ0FBQyxPQUFPLElBQUksT0FBTyxDQUFDLE9BQU8sQ0FBQyxXQUFXLEVBQUUsSUFBSSxHQUFHLENBQUMsQ0FDM0QsQ0FBQztvQ0FDUSxDQUFDO2dCQUVSLE1BQU0sQ0FBQSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQ2xDLENBQUM7b0JBQ0EsS0FBSyxtQkFBbUI7d0JBQ3hCLENBQUM7NEJBQ0EsT0FBTyxDQUFDLGdCQUFnQixDQUFDLE9BQU8sRUFBRTtnQ0FDakMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDOzRCQUMvQyxDQUFDLENBQUMsQ0FBQzs0QkFDSCxLQUFLLENB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// source/day01.js
        window.Day1Preload = function() {
            phaser.load.image('bunk', 'assets/bunk.jpg');
            phaser.load.image('no-fap-nat', 'assets/no-fap-nat.png');
            phaser.load.image('no-fap', 'assets/no-fap.png');
            phaser.load.image('what-to-do', 'assets/what-to-do.png');
            phaser.load.image('what-i-did', 'assets/what-i-did.png');
        }

        window.Day1ShowJoke = function() {
            document.getElementById("__currentSection").innerHTML += "<p>" + Core.GetSection("Day1-Joke").innerHTML + "</p>";
        }

        // source/day02.js
        window.Day2Preload = function() {
            phaser.load.image('shower', 'assets/shower.png');
        }

        Core.AddEventListener("OnGotoSection", function(sectionId, element, tags, reason) {
            if (sectionId === "5/23/18" && reason == EGotoSectionReason.Back) {
                day2LightsOut();
            } else if (tags.indexOf("Dark") != -1) {
                day2LightsOut();
            } else {
                day2LightsOn();
            }

        });

        window.day2just = function() {
            document.getElementById("__currentSection").innerHTML += Core.GetSection("Day2-1").innerHTML;

            return "isn't <i>just</i>";
        }

        // TODO this could be a part of Fractive Core
        window.changeCSS = function(cssFile) {

            var oldlink = document.getElementsByTagName("link").item(1);

            var newlink = document.createElement("link");
            newlink.setAttribute("rel", "stylesheet");
            newlink.setAttribute("type", "text/css");
            newlink.setAttribute("href", cssFile);

            document.getElementsByTagName("head").item(0).replaceChild(newlink, oldlink);
        }

        window.day2LightsOut = function() {
            changeCSS("assets/dark-style.css");
        }

        window.day2LightsOn = function() {
            changeCSS("assets/default-style.css");
        }

        // source/day03.js
        window.Day3Preload = function() {
            phaser.load.image('gay-jesus', 'assets/gay-jesus.jpg');
            phaser.load.image('gay-street', 'assets/gay-street.jpg');
            phaser.load.image('christmas', 'assets/christmas.png');
        }

        window.Day3Animation = function() {
            var animationTime = 4000;
            var style = {
                font: "24px Arial",
                fill: "#ffffff",
                align: "left"
            };
            var thingsHeSaid = [
                "I've been reading the bible more lately",
                "It's really helped me understand who I am",
                "I recommend you read it",
                "",
                "I mean I'm not gonna say \"I hate you\" or anything",
                "I just don't think you should be doing that stuff",
                "I'm sick of people assuming I'm gay",
                "",
                "I used to act on my gay feelings",
                "God loves me, he's just not happy when I'm not doing his will",
                "When I was younger I cross-dressed",
                "I have a friend named Erik who wants to go by Samantha",
                "I still love him but it's wrong to try to be a woman",
                "",
                "I'm turning 22 and I've never kissed anyone",
                "Can you help me meet girls?",
            ];
            words = phaser.add.group();

            var startingY = 830;
            var delay = 0;

            for (var i = 0; i < thingsHeSaid.length; ++i) {
                var text = phaser.add.text(30, startingY, thingsHeSaid[i], style);
                phaser.add.tween(text).to({
                    y: -50
                }, animationTime, Phaser.Easing.Linear.None, true, delay, 0, false);

                delay += animationTime / 3;
            }

            setTimeout(Day3RevealNextLink, delay + animationTime);
        }

        window.Day3RevealNextLink = function() {
            day2LightsOn();
            words.destroy();
            document.getElementById("__currentSection").innerHTML += Core.GetSection("Day3NextToReveal").innerHTML;
        }

        // source/day04.js
        window.Day4Preload = function() {
            phaser.load.audio('dooropen', 'assets/day4/dooropen.wav');
            phaser.load.audio('faintmusic', 'assets/day4/faintmusic.wav');
            phaser.load.audio('monologue', 'assets/day4/monologue.wav');
            phaser.load.audio('music1', 'assets/day4/music1.wav');
            phaser.load.audio('music2', 'assets/day4/music2.wav');
            phaser.load.audio('soundsgood', 'assets/day4/soundsgood.wav');

            phaser.load.image('cards', 'assets/day4/cards.jpg');
            phaser.load.image('goodhand', 'assets/day4/goodhand.jpg');
            phaser.load.image('roof', 'assets/day4/roof.jpg');
            phaser.load.image('gay-jesus', 'assets/gay-jesus.jpg');
        }

        window.Day4Reveal1 = function() {
            document.getElementById("__currentSection").innerHTML += Core.GetSection("Day4MinPt1").innerHTML;
        }

        window.Day4Reveal2 = function() {
            document.getElementById("__currentSection").innerHTML += Core.GetSection("Day4MinPt2").innerHTML;
            return "check my mailbox (nothing)";
        }

        window.Day4FaintMusic = function() {
            phaser.sound.play('faintmusic');
        }

        window.Day4Music1 = function() {
            phaser.sound.play('music1');
        }

        window.Day4OpenDoor = function() {
            phaser.sound.play('dooropen');
            phaser.sound.play('music2');
        }

        window.Day4SoundsGood = function() {
            phaser.sound.play('soundsgood')
        }

        window.Day4PlayMonologue = function() {
            phaser.sound.play('monologue');
        }

        // source/day05.js
        window.day5onlyChance = 'my only chance?';

        window.Day5Preload = function() {
            phaser.load.image('rabbit-hole', 'assets/day5/rabbithole.png');
        }

        // source/day06.js
        window.sectionsVisited = {};

        Core.AddEventListener('OnGotoSection', function(id, element, tags, reason) {
            var result = false;
            if (id === "Day6Test") {
                result = Day6SeenAllCheck();
            }

            window.sectionsVisited[id] = true;

            // If we end up going to the final section, skip the other event listeners
            // because they'll add the wrong sprite
            if (result) return true;
        });

        window.Day6Preload = function() {
            phaser.load.image('outline', 'assets/day6/outline.jpg');
            phaser.load.image('outlineDone', 'assets/day6/outlineDone.jpg');
            phaser.load.image('rc1', 'assets/day6/rc1.jpg');
            phaser.load.image('rc2', 'assets/day6/rc2.jpg');
            phaser.load.image('sourcecode', 'assets/day6/sourcecode.png');
            phaser.load.image('twine', 'assets/day6/twine.png');
            phaser.load.image('philadelphia', 'assets/day6/philadelphia.jpeg');
            phaser.load.image('chemex', 'assets/day6/chemex.jpg');
        }

        window.Day6PutOnHeadphones = function() {
            var muteThis = document.getElementById("muteThis");

            var text = muteThis.innerHTML;

            for (var i = 0; i < text.length; ++i) {
                if (text[i] != " " && Math.random() < 0.33) {
                    text = text.substring(0, i) + '*' + text.substring(i + 1);
                }
            }

            console.log(text);

            var para = document.createElement("p");
            var node = document.createTextNode(text);
            para.appendChild(node);

            var section = document.getElementById("__currentSection");
            section.replaceChild(para, section.childNodes[1]);

            var nextPart = Core.GetSection("Day6HeadphonesOn");
            section.innerHTML += nextPart.innerHTML;
        }

        window.Day6SeenAllCheck = function() {
            var seenAll = true;

            var SectionsNeeded = [
                'Day6SourceCode',
                'Day6Twine',
                'Day6Test',
                'Day6LastNight',
                'Day6Exhausted',
                'Day6Breakfast',
                'Day6Bagels',
                'Day6Eggs',
                'Day6Coffee',
                'Day6OJ',
                'Day6PaperPlates',
                'Day6CoffeeTakesAWhile',
                'Day6BadSugaring',
                'Day6ArrestedDevelopment',
                'Day6Quiet'
            ];

            console.log(window['sectionsVisited']);

            for (var i = 0; i < SectionsNeeded.length; ++i) {
                if (SectionsNeeded[i] in window['sectionsVisited'] && window['sectionsVisited'][SectionsNeeded[i]] === true) {} else
                    return false;
            }

            if (seenAll) {
                Core.GoToSection("Day6Final");
                return true;
            }
        }

        // source/day08.js
        window.Day8Preload = function() {
            phaser.load.image('shirt-soak', 'assets/day8/shirt-soak.png');
            phaser.load.image('gay-jesus', 'assets/gay-jesus.jpg');
        };

        window.Day8MonologueFrom = "monologue from";

        // source/script.js
        // Your Javascript goes here

        // Load assets every story needs
        window.__preload = function() {
            phaser.load.image('cover', 'assets/itch-cover.jpeg');
        }

        // New section event: if a section has the Sprite tag, add the sprite to the
        // window whose key matches the tag following Sprite
        Core.AddEventListener('OnGotoSection', function(id, element, tags, reason) {
            if (window['sprite'] != null) {
                window['sprite'].destroy();
            }

            var index = tags.indexOf('Sprite');
            var spriteKey = 'cover';
            if (index != -1) {
                spriteKey = tags[index + 1];
            }

            if (spriteKey !== "none") {
                window['sprite'] = phaser.add.sprite(0, 0, spriteKey);

                index = tags.indexOf('Scale');
                var scale = 1;
                if (index != -1) {
                    var scale = parseFloat(tags[index + 1]);

                    window['sprite'].scale.setTo(scale, scale);
                }
            }
        });

        window.Season2Links = function() {
            // Generate HTML links to each section 
            // TODO this could be a lot nicer if Core provided link generator functions
            var list = "";
            var episodes = Core.GetSectionsWithTag("S2");

            for (var i = 0; i < episodes.length; i++) {
                var episode = episodes[i];

                // Each episode link needs to call the preload function for its episode
                var preloadFunction = 'Day' + (i + 1) + 'Preload';
                var onloadFunction = 'function() { Core.GoToSection(\'' + episode + '\'); }';

                var onclick = 'if (\'' + preloadFunction + '\' in window) {' + preloadFunction + '(); }';
                onclick += 'phaser.load.onLoadComplete.add(' + onloadFunction + ');';
                onclick += 'phaser.load.start();';
                list += '<p><a href="javascript:' + onclick + '">' + episode + '</a></p>';
            }

            return list;
        }
    </script>
    <script>
        function __Restart() {
            location.reload();
        }
        Core.AddEventListener("OnGotoSection", function(id, element, tags, reason) {
            // Scroll to top of new content
            var contentDiv = document.getElementById("__content");
            if (contentDiv) {
                contentDiv.scrollTop = 0;
            }
        });
    </script>
</head>

<body>
    <div id="__content">
        <!-- source/day01.md -->
        <div id="5/22/18" data-tags="S2" class="section" hidden="true">
            <p>I’m back in New York City! This is the place where I first decided to start making Stream of Pretentiousness. Let me set the tone of the game by telling you an <a title="" href="javascript:;" data-goto-section="Day1-Anecdote">anecdote</a>                about moving here.</p>
        </div>
        <div id="Day1-Anecdote" data-tags="Sprite,bunk,Scale,0.3" class="section" hidden="true">
            <p>I’m only here for the next 3 months, and on a tight budget. I live in a shared bedroom with a total of 6 beds. I’m top bunk on the left, and I don’t get much <a title="" href="javascript:;" data-goto-section="Day1-AloneTime">privacy</a>.</p>
        </div>
        <div id="Day1-AloneTime" data-tags="Sprite,no-fap-nat" class="section" hidden="true">
            <p>Luckily I have an important group chat where I can <a title="" href="javascript:;" data-goto-section="Day1-Talk">talk about</a> what happens to my bodily functions without privacy.</p>
        </div>
        <div id="Day1-Talk" data-tags="Sprite,no-fap" class="section" hidden="true">
            <p>Things were starting to get <a title="" href="javascript:;" data-goto-section="Day1-WhatToDo">out of hand</a>. I sat down to write code on my first day at <a title="" target="_blank" href="http://recurse.com">The Recurse Center&nbsp;<i class="fa fa-external-link" aria-hidden="true"></i></a>                and <a title="" href="javascript:;" data-call-function="Day1ShowJoke">all I could type was “sex,”</a> forcing me to switch tracks and just learn Rust instead.</p>
        </div>
        <div id="Day1-WhatToDo" data-tags="Sprite,what-to-do" class="section" hidden="true">
            <p>There’s no such thing as a stupid question, so I usually tend to <a title="" href="javascript:;" data-goto-section="Day1-WhatIDid">just ask</a>.</p>
        </div>
        <div id="Day1-WhatIDid" data-tags="Sprite,what-i-did" class="section" hidden="true">
            <p>I took that shower. My mind’s been a lot clearer.</p>
        </div>
        <div id="Day1-Joke" data-tags="" class="section" hidden="true">
            <p>That was a joke. This isn’t <em>strictly</em> interactive <em>non</em>-fiction.</p>
        </div>
        <!-- source/day02.md -->
        <div id="5/23/18" data-tags="S2" class="section" hidden="true">
            <p>My showers have been really nice lately and it <a title="" href="javascript:;" data-replace-with="#day2just" id="inline-0">isn’t</a> because of what we talked about last time.</p>
        </div>
        <div id="Day2-1" data-tags="" class="section" hidden="true">
            <p><span data-expand-macro="#day2LightsOut"></span></p>
            <p>Well it is because of that. But it’s also because <a title="" href="javascript:;" data-goto-section="Day2-2">the lights are out.</a></p>
        </div>
        <div id="Day2-2" data-tags="Dark,Sprite,shower" class="section" hidden="true">
            <p>I turn on my phone’s flashlight and then everything’s bathed in this ghostly glow.</p>
            <p>That’s how it looks in my head. I make this game on a tight schedule <a title="" href="javascript:;" data-goto-section="Day2-3">okay?</a></p>
        </div>
        <div id="Day2-3" data-tags="Dark,Sprite,none" class="section" hidden="true">
            <p>Anyway, partway through it, the flashlight turns off and then I can’t see anything. It’s like <a title="" href="javascript:;" data-goto-section="Day2-4">floating</a> in the hot water rain.</p>
        </div>
        <div id="Day2-4" data-tags="Dark,Sprite,none" class="section" hidden="true">
            <p>The first time I did it, I couldn’t find my soap in the dark and I’m pretty sure I used someone else’s. I smelled like peppermint <a title="" href="javascript:;" data-goto-section="Day2-5">after.</a></p>
        </div>
        <div id="Day2-5" data-tags="Dark,Sprite,shower" class="section" hidden="true">
            <p>Then I turn the flashlight on again and I can see the mist from the shower, just floating in the dark like I do.</p>
            <p>I only wish the lights worked when I go to pee…</p>
            <p><a title="" href="javascript:;" data-goto-section="Menu">See you tomorrow.</a></p>
        </div>
        <!-- source/day03.md -->
        <div id="5/24/18" data-tags="S2" class="section" hidden="true">
            <p>Homesickness is a vulnerable state. Sometimes vulnerability is the best opportunity to grow, but not when you share it in all the <a title="" href="javascript:;" data-goto-section="Day3-1">wrong places.</a></p>
        </div>
        <div id="Day3-1" data-tags="Sprite,gay-jesus,Scale,0.5" class="section" hidden="true">
            <p>One of my new roommates is Christian and I <em>really</em> <a title="" href="javascript:;" data-goto-section="Day3-2">didn’t see it coming.</a></p>
        </div>
        <div id="Day3-2" data-tags="Sprite,gay-street,Scale,0.25" class="section" hidden="true">
            <p>I guess I assume most people of color are even better Woke Atheists™ than I am, especially outside of Utah. And everyone else in the house is queer. And there’s a poster on the wall that says Gay Street.</p>
            <p>So I thought I could <a title="" href="javascript:;" data-goto-section="Day3-3">be myself.</a></p>
        </div>
        <div id="Day3-3" data-tags="Sprite,christmas,Scale,0.3" class="section" hidden="true">
            <p>And I knew that was a mistake right after I showed him my Christmas party photos.</p>
            <p><a title="" href="javascript:;" data-goto-section="Day3-4">The things he said…</a></p>
        </div>
        <div id="Day3-4" data-tags="Sprite,none,Dark" class="section" hidden="true">
            <p><span data-expand-macro="#Day3Animation"></span></p>
        </div>
        <div id="Day3NextToReveal" data-tags="" class="section" hidden="true">
            <p>I suddenly felt very unsafe.</p>
            <p>I didn’t say what I wanted to.</p>
            <p><a title="" href="javascript:;" data-goto-section="Menu">I just went to bed.</a></p>
        </div>
        <!-- source/day04.md -->
        <div id="5/25/18 (First episode with audio!)" data-tags="S2,Dark,Sprite,none" class="section" hidden="true">
            <p>Fuck, these streets are <a title="" href="javascript:;" data-goto-section="Day4-2">so lonely.</a></p>
        </div>
        <div id="Day4-2" data-tags="Dark,Sprite,cards,Scale,0.1" class="section" hidden="true">
            <p>Getting off the subway I saw a deck of cards someone had <a title="" href="javascript:;" data-goto-section="Day4-3">ripped to shreds</a> and scattered everywhere.</p>
        </div>
        <div id="Day4-3" data-tags="Dark,Sprite,goodhand,Scale,0.1" class="section" hidden="true">
            <p>And I realized I’ve been dealt a really good hand with this summer in New York, but that’s what sucks:</p>
            <p>No amount of loneliness would make it a good decision to shred the deck and go back to the certainty of <a title="" href="javascript:;" data-goto-section="Day4-4">home.</a></p>
        </div>
        <div id="Day4-4" data-tags="Dark,Sprite,none" class="section" hidden="true">
            <p>Home here isn’t really a home yet. I’m out of place in this neighborhood. My earbuds broke today so I can’t retreat into my music.</p>
            <p>At least I’m here now, I can <a title="" href="javascript:;" data-call-function="Day4Reveal1">open the front door</a></p>
        </div>
        <div id="Day4MinPt1" data-tags="" class="section" hidden="true">
            <p><a title="" href="javascript:;" data-call-function="Day4Reveal2">check my mailbox</a></p>
        </div>
        <div id="Day4MinPt2" data-tags="" class="section" hidden="true">
            <p><a title="" href="javascript:;" data-goto-section="Day4-5">climb the stairs</a></p>
        </div>
        <div id="Day4-5" data-tags="Dark,Sprite,none" class="section" hidden="true">
            <p><span data-expand-macro="#Day4FaintMusic"></span></p>
            <p>…and hear a song I’ve never heard before.</p>
            <p><a title="" href="javascript:;" data-goto-section="Day4-6">Who’s playing that?</a></p>
        </div>
        <div id="Day4-6" data-tags="Dark,Sprite,none" class="section" hidden="true">
            <p><span data-expand-macro="#Day4Music1"></span></p>
            <p>It’s from inside my apartment.</p>
            <p><a title="" href="javascript:;" data-goto-section="Day4-7">Go in.</a></p>
        </div>
        <div id="Day4-7" data-tags="Dark,Sprite,gay-jesus,Scale,0.5" class="section" hidden="true">
            <p><span data-expand-macro="#Day4OpenDoor"></span></p>
            <p>Oh my God, it’s him!</p>
            <p>What do I <a title="" href="javascript:;" data-goto-section="Day4-8">say?</a></p>
        </div>
        <div id="Day4-8" data-tags="Dark,Sprite,gay-jesus,Scale,0.5" class="section" hidden="true">
            <p><span data-expand-macro="#Day4SoundsGood"></span></p>
            <p>I could have said “That sound was the most beautiful thing I heard today.”</p>
            <p>I could have said “Fuck you.”</p>
            <p>I could have <a title="" href="javascript:;" data-goto-section="Day4-9">said…</a></p>
        </div>
        <div id="Day4-9" data-tags="Dark,Sprite,roof,Scale,0.1" class="section" hidden="true">
            <p><span data-expand-macro="#Day4PlayMonologue"></span><br/>…what I said to myself when I went to the roof and went over that moment in my head.</p>
            <p>But it’s not my job to say all that to a stranger.</p>
        </div>
        <!-- source/day05.md -->
        <div id="5/28/18" data-tags="S2" class="section" hidden="true">
            <p>It’s been a while since I played other interactive fiction for inspiration. I’ve had <a title="" target="_blank" href="http://www.teleportacia.org/war">My Boyfriend Came Back from the War&nbsp;<i class="fa fa-external-link" aria-hidden="true"></i></a>                on my list for <a title="" href="javascript:;" data-goto-section="Day5-2">a while.</a></p>
        </div>
        <div id="Day5-2" data-tags="Sprite,rabbit-hole,Scale,0.75" class="section" hidden="true">
            <p>This summer is <a title="" href="javascript:;" data-replace-with="$day5onlyChance" id="inline-1">my chance</a> to finally live the life where I follow up on things that seemed too trivial to justify spending time on before. To fall down
                <a
                    title="" href="javascript:;" data-goto-section="Day5-3">rabbit holes</a> like I always wish I could.</p>
        </div>
        <div id="Day5-3" data-tags="" class="section" hidden="true">
            <p>So if you’re wondering where I’ve gone in the next 24 hours, know that it started with a google search and the permission to keep clicking <a title="" target="_blank" href="http://awp.diaart.org/lialina/diaintro.html">“Open Link in New Tab.”&nbsp;<i class="fa fa-external-link" aria-hidden="true"></i></a></p>
        </div>
        <!-- source/day06.md -->
        <div id="5/29/18" data-tags="S2,Sprite,outline,Scale,0.1" class="section" hidden="true">
            <p>Season 2 has been so linear so far. Maybe it’s because the episodes really look like <a title="" href="javascript:;" data-goto-section="Day6SourceCode">this</a>. Today I’m really gonna put things to the <a title="" href="javascript:;" data-goto-section="Day6Test">test.</a></p>
        </div>
        <div id="Day6SourceCode" data-tags="Sprite,sourcecode,Scale,0.4" class="section" hidden="true">
            <p>I’m making the game in a new engine called <a title="" target="_blank" href="http://fractive.io">Fractive&nbsp;<i class="fa fa-external-link" aria-hidden="true"></i></a>. Both Fractive and <a title="" target="_blank" href="http://github.com/NQNStudios/daily-stream">Stream of Pretentiousness&nbsp;<i class="fa fa-external-link" aria-hidden="true"></i></a>                are fully open source, in case you were wondering!</p>
            <p>Fractive really needs an editor. Last year the episode structures were more free-flowing because internally they looked more like <a title="" href="javascript:;" data-goto-section="Day6Twine">this</a>.</p>
        </div>
        <div id="Day6Twine" data-tags="Sprite,twine,Scale,0.5" class="section" hidden="true">
            <p>You can see how there’s a little more room for creativity, structure-wise.</p>
            <p><a title="" href="javascript:;" data-goto-section="5/29/18">Anyway,</a></p>
        </div>
        <div id="Day6Test" data-tags="Sprite,rc1,Scale,0.1" class="section" hidden="true">
            <p>I’m having a pretty rough morning. I was the first person to get to RC, and I had a lot on my mind.</p>
            <ul>
                <li><a title="" href="javascript:;" data-goto-section="Day6LastNight">Last night</a></li>
                <li><a title="" href="javascript:;" data-goto-section="Day6ArrestedDevelopment">Arrested Development</a></li>
                <li><a title="" href="javascript:;" data-goto-section="Day6Breakfast">Breakfast</a></li>
                <li><a title="" href="javascript:;" data-goto-section="Day6Coffee">Goddamn, do I need coffee</a></li>
                <li><a title="" href="javascript:;" data-goto-section="Day6Quiet">It’s so quiet</a></li>
            </ul>
        </div>
        <div id="Day6LastNight" data-tags="" class="section" hidden="true">
            <p id="muteThis">I didn't get such good sleep last night. There were some kind of alarm going off down the street and it seemed like half an hour with sirens rushing past outside the window.</p>
            <p>Last week I bought <a title="" href="javascript:;" data-call-function="Day6PutOnHeadphones">noise canceling headphones</a> to help with this kind of situation.</p>
        </div>
        <div id="Day6HeadphonesOn" data-tags="" class="section" hidden="true">
            <p>They couldn’t drown out everything. And I think it was a mistake trying to listen to a <a title="" target="_blank" href="https://www.acast.com/whitingwongs/">podcast&nbsp;<i class="fa fa-external-link" aria-hidden="true"></i></a> instead of
                music—podcasts keep my brain running instead of calming it down—but it was the season finale and I got excited…</p>
            <p>Then I had weird dreams and woke up at 6:30. <a title="" href="javascript:;" data-goto-section="Day6Exhausted">I’m fucking exhausted.</a></p>
        </div>
        <div id="Day6Exhausted" data-tags="" class="section" hidden="true">
            <p>Maybe it’s just that I’m past the Honeymoon stage, but maybe New York isn’t my city after all.</p>
            <p><a title="" href="javascript:;" data-goto-section="Day6Test">Anyway,</a></p>
        </div>
        <div id="Day6Breakfast" data-tags="Sprite,rc1,Scale,0.1" class="section" hidden="true">
            <p>Just <a title="" href="javascript:;" data-goto-section="Day6Bagels">10 bagels in</a> and I’m already getting sick of them, but I don’t have any other breakfast food in the fridge here.</p>
            <p>I have most of a dozen eggs in the fridge at home, but I think I just have to <a title="" href="javascript:;" data-goto-section="Day6Eggs">cut my losses</a> there.</p>
            <p><a title="" href="javascript:;" data-goto-section="Day6Test">Anyway,</a></p>
        </div>
        <div id="Day6Bagels" data-tags="Sprite,philadelphia,Scale,0.75" class="section" hidden="true">
            <p>I haven’t been able to find any cream cheese out here, and I’ve checked like half a dozen stores. It’s not that their cream cheese is particularly good, but I have this weird no-reason brand loyalty to Philadelphia blueberry cream cheese.
                I’ve been eating my bagels with some communal jam in the RC fridge, but I really miss the real stuff. :’(</p>
            <p><a title="" href="javascript:;" data-goto-section="Day6Breakfast">Anyway,</a></p>
        </div>
        <div id="Day6Eggs" data-tags="" class="section" hidden="true">
            <p>I was gonna make myself eggs for breakfast every morning but the sink in the apartment piles up with other people’s dishes. I’ve never had an apartment where that didn’t happen. I almost never cook because of it. Really makes me miss living
                at home, my real home.</p>
            <p><a title="" href="javascript:;" data-goto-section="Day6Breakfast">Anyway,</a></p>
        </div>
        <div id="Day6Coffee" data-tags="Sprite,chemex,Scale,0.2" class="section" hidden="true">
            <p>The Chemex here is pretty awesome. I love the visceral feel of making coffee with it. Maybe I’ll make a minigame all about that.</p>
            <p>The problem is it takes <a title="" href="javascript:;" data-goto-section="Day6CoffeeTakesAWhile">so damn long</a>.</p>
            <p><a title="" href="javascript:;" data-goto-section="Day6OJ">Orange juice</a> in the meantime?</p>
            <p><a title="" href="javascript:;" data-goto-section="Day6Test">Anyway,</a></p>
        </div>
        <div id="Day6OJ" data-tags="" class="section" hidden="true">
            <p>When I realized <a title="" href="javascript:;" data-goto-section="Day6Eggs">cooking at my apartment was a bust,</a> I still managed to salvage some of the groceries I’d bought. A jug of orange juice I stuffed in my backpack along with a pack
                of <a title="" href="javascript:;" data-goto-section="Day6PaperPlates">paper plates</a> I brought all the way on the subway to RC.</p>
            <p><a title="" href="javascript:;" data-goto-section="Day6Coffee">Anyway,</a></p>
        </div>
        <div id="Day6PaperPlates" data-tags="" class="section" hidden="true">
            <p>I got in an argument once about the environmental sustainability of using paper plates. I figured they were shitty for the environment, but my friend pointed out that we use a ton of water washing our reusable plates, too. I didn’t bother
                to do any more research after that and I kind of feel bad about it, but I use paper plates now when I don’t have the energy to wash dishes.</p>
            <p><a title="" href="javascript:;" data-goto-section="Day6Coffee">Anyway,</a></p>
        </div>
        <div id="Day6CoffeeTakesAWhile" data-tags="" class="section" hidden="true">
            <h1>The Morning Paradox</h1>
            <p>The worst thing in the world is the feeling of not yet having your morning coffee, and having to actually <em>make the coffee</em> while still in that state of <a title="" href="javascript:;" data-goto-section="Day6BadSugaring">spiritual dysfunction.</a>                Also making breakfast.</p>
            <p><a title="" href="javascript:;" data-goto-section="Day6Coffee">Anyway,</a></p>
        </div>
        <div id="Day6BadSugaring" data-tags="" class="section" hidden="true">
            <p>Yesterday I messed up and put a packet of sugar directly in the pot. I was so furious with myself, even though I knew it was such a small mistake. I had to bring up a mantra I’ve been using to reign myself in, “The things you say to yourself,
                you wouldn’t say to anyone else.”</p>
            <p><a title="" href="javascript:;" data-goto-section="Day6Coffee">Anyway,</a></p>
        </div>
        <div id="Day6ArrestedDevelopment" data-tags="" class="section" hidden="true">
            <p>As I was laying awake at 6:30 in the morning I had a chance to watch the first episode of Season 5. It wasn’t as bad as Season 4 but I’m still really worried that it’ll suck.</p>
            <p>Out here starving for connections to home and my comfortable past, I need this season to not suck. That show used to mean so much to me.</p>
            <p><a title="" href="javascript:;" data-goto-section="Day6Test">Anyway,</a></p>
        </div>
        <div id="Day6Quiet" data-tags="Sprite,rc2,Scale,0.1" class="section" hidden="true">
            <p>Here all alone, I can play my music through the speakers. I can actually sing along! It’s been so long since I last sang. I can change into a skirt without anyone noticing.</p>
            <p>I guess it’s not so bad.</p>
            <p><a title="" href="javascript:;" data-goto-section="Day6Test">Anyway,</a></p>
        </div>
        <div id="Day6Final" data-tags="Sprite,outlineDone,Scale,0.1" class="section" hidden="true">
            <p>Okay this episode was a <a title="" href="javascript:;" data-goto-section="Day6Tomorrow">whole lot of work</a>, but I nailed it. I mean, you be the judge and all, maybe it’s boring as hell (probably) but the point is, I wanted to be nonlinear
                and I did it, and I stuck with it and wrote everything I put on the outline instead of quitting halfway.</p>
            <p>Fractive still needs a proper editor, though.</p>
        </div>
        <div id="Day6Tomorrow" data-tags="" class="section" hidden="true">
            <p>Tomorrow I’ll probably just dump some bullshit I’ve already written. :P</p>
            <p>See you then,<br/>—Nat</p>
        </div>
        <!-- source/day07.md -->
        <div id="5/30/18" data-tags="S2" class="section" hidden="true">
            <p>I’m feeling lazy so I just want to show you something I wrote a while ago.</p>
            <p>There’s a <a title="" href="javascript:;" data-goto-section="Day7Backstory">backstory</a> if you’re into that kind of thing.</p>
            <p>If not, <a title="" href="javascript:;" data-goto-section="Day7TinderDaddy">click here.</a></p>
        </div>
        <div id="Day7Backstory" data-tags="" class="section" hidden="true">
            <p>For about three weeks, I was a writer for <a title="" target="_blank" href="http://www.hercampus.com/author/nat-quayle-nelson">Her Campus Utah.&nbsp;<i class="fa fa-external-link" aria-hidden="true"></i></a></p>
            <p>You are about to read my third article, which was deemed extremely hilarious but too vulgar to be published.</p>
            <p>That’s not why I quit—I quit because the site is run by a for-profit company that doesn’t pay its writers anything. It seems really unfair and anti-feminist that the women who set out to empower women in college, would see fit to profit off
                of unpaid labor by women.</p>
            <p>Without further ado… <a title="" href="javascript:;" data-goto-section="Day7TinderDaddy">Valentines from a Tinder Daddy</a></p>
        </div>
        <div id="Day7TinderDaddy" data-tags="" class="section" hidden="true">
            <object data="assets/day7/Valentines from a Tinder Daddy.pdf#page=1" type="application/pdf" width="100%" height="100%">
   <p><b>Error</b>: This browser does not support PDFs. Please download the PDF to view it: <a href="assets/day7/Valentines from a Tinder Daddy.pdf">Download PDF</a>.</p>
</object>
        </div>
        <!-- source/day08.md -->
        <div id="5/31/18" data-tags="S2,Sprite,gay-jesus,Scale,0.5" class="section" hidden="true">
            <p>Interesting <a title="" href="javascript:;" data-replace-with="$Day8MonologueFrom" id="inline-2">conversation with</a> our friend Bible Boy this morning in the kitchen.</p>
            <p><a title="" href="javascript:;" data-goto-section="Day8M1">It went like this.</a></p>
        </div>
        <div id="Day8M1" data-tags="Sprite,shirt-soak" class="section" hidden="true">
            <p>First of all I noticed that his shirt was visibly wet in several different places which I couldn’t explain because it hadn’t been raining the night before. I don’t ask Bible Boy questions so we’ll never know why.</p>
            <p>He had a big metal basket on wheels stuffed with crumpled up clothes: “Oh good morning Nat! I have to do laundry.”</p>
            <p><a title="" href="javascript:;" data-goto-section="Day8M2"><em>“Oh. Cool.”</em></a></p>
        </div>
        <div id="Day8M2" data-tags="Sprite,shirt-soak" class="section" hidden="true">
            <p>“Do you have to do your laundry?”</p>
            <p><em>(Is he trying to get me to do laundry together??)</em></p>
            <p><a title="" href="javascript:;" data-goto-section="Day8M3"><em>“No, I did mine a few days ago.”</em></a></p>
        </div>
        <div id="Day8M3" data-tags="Sprite,shirt-soak" class="section" hidden="true">
            <p>“There’s this good laundromat down the block. I mean it’s a little bit further than the other ones but I like it.”</p>
            <p><em>(Someone’s in the bathroom and I need to pee so I can’t just peace out. Fuck)</em></p>
            <p><a title="" href="javascript:;" data-goto-section="Day8M4"><em>“Ok.”</em></a></p>
        </div>
        <div id="Day8M4" data-tags="Sprite,shirt-soak" class="section" hidden="true">
            <p>“Do you know about detoxing?”</p>
            <p><em>(Please don’t explain this to me.)</em></p>
            <p><a title="" href="javascript:;" data-goto-section="Day8M5"><em>“Yeah.”</em></a></p>
        </div>
        <div id="Day8M5" data-tags="Sprite,shirt-soak" class="section" hidden="true">
            <p>“It’s basically when you try to cleanse your environment and the things you put in your body of things that are toxic to you.”</p>
            <p><em>(Oh really??)</em></p>
            <p>“I’m not as diligent about it as I should be but I do use this non-toxic laundry detergent. And I filter my water.”</p>
            <p><a title="" href="javascript:;" data-goto-section="Day8M6"><em>“Great.”</em></a></p>
        </div>
        <div id="Day8M6" data-tags="Sprite,shirt-soak" class="section" hidden="true">
            <p>“When I use toxic laundry detergent I notice I actually feel sick. That Tide stuff is so bad for you. I don’t know if you feel ill, but I do.”</p>
            <p><a title="" href="javascript:;" data-goto-section="Day8M7"><em>“Uh-huh.”</em></a></p>
        </div>
        <div id="Day8M7" data-tags="Sprite,shirt-soak" class="section" hidden="true">
            <p>“And do you know about detoxing your liver? I won’t explain it but just look it up, okay?”</p>
            <p><em>(Please leave.)</em></p>
            <p>“Sorry loading all that on you I just really like encouraging people to do these good things!”</p>
            <p><em>(The bathroom’s open!)</em></p>
            <p><a title="" href="javascript:;" data-goto-section="Menu"><em>“Have a nice day, bye”</em></a></p>
        </div>
        <!-- source/day09.md -->
        <div id="6/1/18" data-tags="S2" class="section" hidden="true">
            <p>Everything’s broken today and I’m just gonna leave it like that.</p>
            <p>Sorry.</p>
        </div>
        <!-- source/menu.md -->
        <div id="Menu" data-tags="Start" class="section" hidden="true">
            <h2><em>Welcome to the</em></h2>
            <h2>Stream of Pretentiousness</h2>
            <p>You’re playing an irreverent interactive nonfiction game written and programmed by Nat Quayle Nelson. New episodes are released daily Monday-Friday!</p>
            <h4>Content warning: Queer stuff, sex stuff, offensive language. General oversharing.</h4>
            <h3><a title="" href="javascript:;" data-replace-with="@Season2" id="inline-3">Season Two: NYC, 2018</a></h3>
            <h3><a title="" href="javascript:;" data-replace-with="@Season1" id="inline-4">Season One: SLC, 2017</a></h3>
        </div>
        <div id="Season1" data-tags="" class="section" hidden="true">
            <p>Season 1 was made in Twine. Lots of people get stuck playing it because they don’t see the back button. It might be hard to see, but it’s there on the left. Trust me.</p>
            <p><a href="assets/season1/twine.html">Play season 1.</a></p>
        </div>
        <div id="Season2" data-tags="" class="section" hidden="true">
            <h3>Season 2: NYC, 2018</h3>
            <p><span data-expand-macro="#Season2Links"></span></p>
        </div>

        <div id="__phaser"></div>
        <div id="__currentSection">
            <noscript>
					<h1>Oh no!</h1>
					<p>Fractive requires Javascript to run, but Javascript is currently disabled.</p>
					<p>Please check your browser and plugin settings. You may need to enable Javascript in your browser and/or whitelist this URL in your script blocker if you're using one.</p>
				</noscript>
        </div>
    </div>
    <div id="__historyContainer" hidden>
        <div id="__history"></div>
    </div>
    <div id="__controls">
        <p class="controls-left">
            <a href="javascript:Core.GotoPreviousSection();">Back</a>
        </p>
        <p class="controls-right">
            <a href="#" onclick="__Restart()">Restart</a>
        </p>
    </div>
</body>

</html>
<script type="text/javascript">
    window.onload = function() {
        var args = {
            "width": 800,
            "height": 800,
            "transparent": true,
            "antialias": true
        }; // This code is injected into a Fractive story's output HTML file as the first
        // sequence of JavaScript that will be executed.
        // args.width, .height, .transparent, and .antialias will be set before
        // this code is invoked.

        // Helper creates a function that wraps another function in a null-check
        var undefinedFunctions = [];

        function checkAndCall(functionName) {
            return function() {
                if (window[functionName] !== undefined) {
                    window[functionName]();
                } else if (undefinedFunctions.indexOf(functionName) == -1) {
                    console.log("Function " + functionName + " is not defined. Skipping it.");
                    undefinedFunctions.push(functionName);
                }
            };
        }

        // Create a Phaser game object.
        phaser = new Phaser.Game(args.width, args.height, Phaser.AUTO, '__phaser', {
            preload: checkAndCall('__preload'),
            create: function() {
                checkAndCall('__create')();
                // Start the story after the Phaser game is fully prepared
                Core.BeginStory();
            },
            update: checkAndCall('__update'),
            render: checkAndCall('__render')
        }, args.transparent, args.antialias);
    };
</script>